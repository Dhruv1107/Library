<app-alert 
    class="text-center"
    *ngIf="errorData"
    [errorData]="errorData">
</app-alert>
<div class="row justify-content-center align-items-center" #card>
    <div class="col-md-3 mx-auto">
        <div class="card mt-5">
            <div class="card-body">
                <h5 class="text-center">{{ pageName }} to continue</h5> 
                <form class="margin-form" [formGroup]="loginForm"  (ngSubmit)="login()">
                    <div class="form-group mb-3" *ngIf="pageName==='Sign Up'">
                        <div class="input-group">
                            <div class="input-group-append">
                                <span class="input-group-text bg-dark text-white">
                                    <em class="fa fa-user-circle"></em>
                                </span>
                            </div>
                            <input 
                                type="text" 
                                class="form-control" 
                                placeholder="First Name" 
                                name="firstName"
                                formControlName="firstName"
                                onkeypress="return (event.charCode > 64 && event.charCode < 91) || (event.charCode > 96 && event.charCode < 123)"
                                (keyup)="nameValidation('firstName')"
                                [ngClass]="{ 'invalid': !alphabetValidation['firstName'] }"
                            >
                        </div>
                        <span 
                            class="help-block" 
                            *ngIf="(!loginForm.get('firstName').valid && loginForm.get('firstName').touched) && loginForm.get('firstName').value === ''">
                            Enter First Name
                        </span>
                        <span 
                            class="help-block" 
                            *ngIf="loginForm.get('firstName').value.length > 15">
                            Name must be less than 16 characters
                        </span>
                        <span 
                            class="help-block" 
                            *ngIf="!this.alphabetValidation['firstName']">
                            Only alphabets are allowed!
                        </span>
                    </div>
                    <div class="form-group mb-3" *ngIf="pageName === 'Sign Up'">
                        <div class="input-group">
                            <div class="input-group-append">
                                <span class="input-group-text bg-dark text-white">
                                    <em class="fa fa-user-circle"></em>
                                </span>
                            </div>
                            <input 
                                type="text" 
                                class="form-control" 
                                placeholder="Last Name" 
                                name="lastName"
                                formControlName="lastName"
                                onkeypress="return (event.charCode > 64 && event.charCode < 91) || (event.charCode > 96 && event.charCode < 123)"
                                (keyup)="nameValidation('lastName')"
                                [ngClass]="{ 'invalid': !alphabetValidation['lastName'] }"
                            >
                        </div>
                        <span 
                            class="help-block" 
                            *ngIf="(!loginForm.get('lastName').valid && loginForm.get('lastName').touched) && loginForm.get('lastName').value === ''">
                            Enter Last Name
                        </span>
                        <span 
                            class="help-block" 
                            *ngIf="loginForm.get('lastName').value.length > 15">
                            Name must be less than 16 characters
                        </span>
                        <span 
                            class="help-block" 
                            *ngIf="!alphabetValidation['lastName']">
                            Only alphabets are allowed!
                        </span>
                    </div>
                    <div class="form-group mb-3">
                        <div class="input-group">
                            <div class="input-group-append">
                                <span class="input-group-text bg-dark text-white">
                                    <em class="fa fa-envelope"></em>
                                </span>
                            </div>
                            <input 
                                type="text" 
                                class="form-control" 
                                placeholder="Email" 
                                name="email"
                                formControlName="email">
                        </div>
                        <span 
                            class="help-block" 
                            *ngIf="(!loginForm.get('email').valid && loginForm.get('email').touched) && loginForm.get('email').value === null">
                            Enter email
                        </span>
                        <span 
                            class="help-block" 
                            *ngIf="(!loginForm.get('email').valid && loginForm.get('email').touched) && loginForm.get('email').value !== null">
                            Enter valid email
                        </span>
                    </div>
                    <div class="form-group">
                        <div class="input-group mb-2">
                            <div class="input-group-append">
                                <span class="input-group-text bg-dark text-white">
                                    <em class="fa fa-key"></em>
                                </span>
                            </div>
                            <input 
                                type="password" 
                                class="form-control" 
                                placeholder="Password" 
                                name="password" 
                                autocomplete="false"
                                formControlName="password">
                        </div>
                        <span 
                            class="help-block" 
                            *ngIf="loginForm.get('password').touched && loginForm.get('password').value === ''">
                            Enter password
                        </span>
                        <span 
                            class="help-block" 
                            *ngIf="loginForm.get('password').value !== '' && loginForm.get('password').value.length < 8">
                            Password length should be 8 or greater
                        </span>
                    </div>
                    <button 
                        type="submit" 
                        class="btn btn-dark form-control mt-2"
                        [disabled]="submitted"
                    >
                        {{ pageName }}
                    </button>
                    <div class="text-center mt-3 link-font" *ngIf="pageName==='Log In'">
                        <span>
                            Forgot
                        </span>
                        <a href="#">
                            Password?
                        </a>
                    </div>
                    <div class="text-center link-font" *ngIf="pageName==='Log In'">
                        <span class="txt1">
                        Create an account?
                        </span>
                        <a href="#" class="txt2 hov1" [routerLink]="['/auth/signup']">
                        Sign up
                        </a>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>